<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Exam Mentor</title>

<style>
:root{
  --bg:#f7fdf6;
  --panel:#ffffff;
  --border:#d1e7d3;
  --text:#0f172a;
  --muted:#6b7280;
  --accent:#3d9d6f;
  --radius:12px;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif}

body{
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* HEADER */
header{
  height:64px;
  background:var(--panel);
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  padding:0 20px;
  border-bottom:1px solid var(--border);
}

.logo img{height:44px}

.site-title{
  text-align:center;
  font-weight:700;
  font-size:25px;
  color:var(--accent);
}

/* TOP MENU */
.menu{position:relative}
.menu-btn{
  background:none;
  border:none;
  cursor:pointer;
  font-size:14px;
  font-weight:600;
  color:var(--accent);
}
.menu-content{
  position:absolute;
  right:0;
  top:40px;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  display:none;
  min-width:160px;
}
.menu.open .menu-content{display:block}
.menu-content div{
  padding:10px 14px;
  cursor:pointer;
}
.menu-content div:hover{
  background:#e6f4e9;
  color:var(--accent);
}

/* LAYOUT */
.container{
  display:grid;
  grid-template-columns:280px 1fr;
  flex:1;
  min-height:0;
}

/* SIDEBAR */
.sidebar{
  background:var(--panel);
  border-right:1px solid var(--border);
  padding:14px;
  overflow-y:auto;
}

/* CHEVRONS */
details summary{
  cursor:pointer;
  padding:8px 10px;
  font-weight:600;
  list-style:none;
  position:relative;
  border-radius:8px;
}
details summary::marker{display:none}
details summary::after{
  content:"▸";
  position:absolute;
  right:10px;
  transition:.2s;
}
details[open]>summary::after{transform:rotate(90deg)}
details[open]>summary{background:#e6f4e9}

/* SUBJECT */
.subject summary{
  padding-left:20px;
  font-weight:600;
  color:var(--accent);
}

/* YEAR */
.year summary{
  padding-left:34px;
  font-size:14px;
  font-weight:500;
  color:#4b5563;
}

/* PAPER */
.paper-item{
  padding:6px 0 6px 52px;
  font-size:13px;
  cursor:pointer;
  color:var(--muted);
}
.paper-item:hover{color:var(--accent)}
.paper-item.active{
  color:var(--accent);
  font-weight:600;
}

/* CONTENT */
.content{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:0;
}

.breadcrumb{
  font-size:14px;
  color:var(--muted);
}

/* TABS */
.tabs{
  display:flex;
  gap:10px;
  border-bottom:2px solid var(--border);
}
.tab{
  padding:6px 12px;
  font-size:14px;
  cursor:pointer;
  color:var(--muted);
}
.tab.active{
  color:var(--accent);
  font-weight:600;
  border-bottom:3px solid var(--accent);
}
.tab.not-found{
  color:#ef4444;
  cursor:default;
}
.tab.disabled{
  color:#9ca3af;
  cursor:default;
}

/* VIEWER */
iframe{
  flex:1;
  width:100%;
  border:none;
  border-radius:12px;
  background:#fff;
}

/* FOOTER */
footer{
  position:sticky;
  bottom:0;
  background:var(--panel);
  border-top:1px solid var(--border);
  text-align:center;
  font-size:13px;
  padding:10px;
}

/* =======================
   MOBILE RESPONSIVENESS
======================= */

@media (max-width: 900px){
  .container{
    grid-template-columns:220px 1fr;
  }
}

@media (max-width: 768px){
  header{
    grid-template-columns:auto 1fr auto;
    padding:0 12px;
  }

  .site-title{
    font-size:16px;
  }

  .container{
    grid-template-columns:1fr;
  }

  .sidebar{
    position:relative;
    max-height:220px;
    overflow-y:auto;
    border-right:none;
    border-bottom:1px solid var(--border);
  }

  .content{
    padding:12px;
  }

  iframe{
    min-height:60vh;
  }
}

@media (max-width: 480px){
  .site-title{
    font-size:15px;
  }

  .menu-btn{
    font-size:13px;
  }

  footer{
    font-size:12px;
    padding:8px;
  }
}


</style>
</head>

<body>

<header>
  <div class="logo"><img src="mem1.png"></div>
  <div class="site-title">My Exam Mentor</div>

  <div class="menu" id="menu">
    <button class="menu-btn" id="menuBtn" onclick="toggleMenu()">Home ▾</button>
    <div class="menu-content" id="menuItems"></div>
  </div>
</header>

<div class="container">
  <aside class="sidebar" id="sidebar"></aside>

  <main class="content">
    <div class="breadcrumb" id="breadcrumb">Home</div>
    <div class="tabs" id="tabs"></div>
    <iframe id="viewer" src="pages/home.html"></iframe>
  </main>
</div>

<footer>
    © 2026 My Exam Mentor · Built with Passion by Dheeraj Gurrapu
</footer>

<script>
/* TOP MENU */
const isMobile = /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);

const pages={Home:'home.html',About:'about.html'};
let activePage='Home';

function toggleMenu(){menu.classList.toggle('open')}
function renderMenu(){
  menuBtn.textContent=activePage+' ▾';
  menuItems.innerHTML='';
  Object.keys(pages).forEach(p=>{
    if(p!==activePage){
      const d=document.createElement('div');
      d.textContent=p;
      d.onclick=()=>loadPage(p);
      menuItems.appendChild(d);
    }
  });
}
function loadPage(p){
  activePage=p;
  viewer.src='pages/'+pages[p];
  breadcrumb.textContent=p;
  tabs.innerHTML='';
  renderMenu();
  menu.classList.remove('open');
}
renderMenu();

/* SIDEBAR */
fetch('pdf-index.json').then(r=>r.json()).then(buildSidebar);

function buildSidebar(data){
  sidebar.innerHTML='';

  for(const board in data){
    const bd=document.createElement('details');
    bd.appendChild(Object.assign(document.createElement('summary'),{textContent:board.toUpperCase()}));

    for(const subject in data[board]){
      const sd=document.createElement('details');
      sd.className='subject';
      sd.appendChild(Object.assign(document.createElement('summary'),{textContent:subject}));

      const years=Object.keys(data[board][subject]).sort((a,b)=>b.localeCompare(a));

      years.forEach(year=>{
        const yd=document.createElement('details');
        yd.className='year';
        yd.appendChild(Object.assign(document.createElement('summary'),{textContent:year}));

        const grouped={};

        data[board][subject][year].forEach(file=>{
          const base=file.replace(/_[QA]\.pdf$/,'').replace('.pdf','');
          grouped[base]=grouped[base]||{};
          if(file.includes('_A')) grouped[base].A=file;
          else grouped[base].Q=file;
        });

        Object.keys(grouped).forEach(base=>{
          const item=document.createElement('div');
          item.className='paper-item';
          item.textContent=base;

          item.onclick=()=>{
            document.querySelectorAll('.paper-item').forEach(x=>x.classList.remove('active'));
            item.classList.add('active');

            breadcrumb.textContent=`${board.toUpperCase()} → ${subject} → ${year} → ${base}`;

            tabs.innerHTML=`
              <div class="tab active" data-type="Q">Question Paper</div>
              ${
                grouped[base].A
                ? `<div class="tab" data-type="A">Answer Sheet</div>`
                : `<div class="tab not-found">Answer Sheet Not Found</div>`
              }
              <div class="tab disabled">Analysis (Coming Soon)</div>
            `;

            document.querySelectorAll('.tab[data-type]').forEach(tab=>{
              tab.onclick=()=>{
                document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
                tab.classList.add('active');

                if(tab.dataset.type==='Q')
                  viewer.src=`pdfs/${board}/${subject}/${year}/${grouped[base].Q}#view=FitH`;
                if(tab.dataset.type==='A')
                  viewer.src=`pdfs/${board}/${subject}/${year}/${grouped[base].A}#view=FitH`;
              };
            });

            viewer.src=`pdfs/${board}/${subject}/${year}/${grouped[base].Q}#view=FitH`;
          };

          yd.appendChild(item);
        });

        sd.appendChild(yd);
      });

      bd.appendChild(sd);
    }
    sidebar.appendChild(bd);
  }
}
</script>

</body>
</html>
