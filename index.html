<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>My Exam Mentor</title>

<style>
:root{
  --bg:#f7fdf6;
  --panel:#ffffff;
  --border:#d1e7d3;
  --text:#0f172a;
  --muted:#6b7280;
  --accent:#3d9d6f;
  --radius:12px;
}

*{box-sizing:border-box;margin:0;padding:0;font-family:Inter,system-ui,sans-serif}

body{
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* HEADER */
header{
  height:64px;
  background:var(--panel);
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  padding:0 20px;
  border-bottom:1px solid var(--border);
}

.logo img{height:44px}

.site-title{
  text-align:center;
  font-weight:700;
  font-size:25px;
  color:var(--accent);
}

/* TOP MENU */
.menu{position:relative}
.menu-btn{
  background:none;
  border:none;
  cursor:pointer;
  font-size:14px;
  font-weight:600;
  color:var(--accent);
}
.menu-content{
  position:absolute;
  right:0;
  top:40px;
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  display:none;
  min-width:160px;
}
.menu.open .menu-content{display:block}
.menu-content div{
  padding:10px 14px;
  cursor:pointer;
}
.menu-content div:hover{
  background:#e6f4e9;
  color:var(--accent);
}

/* LAYOUT */
.container{
  display:grid;
  grid-template-columns:280px 1fr;
  flex:1;
  min-height:0;
}

/* SIDEBAR */
.sidebar{
  background:var(--panel);
  border-right:1px solid var(--border);
  padding:14px;
  overflow-y:auto;
}

/* CHEVRONS */
details summary{
  cursor:pointer;
  padding:8px 10px;
  font-weight:600;
  list-style:none;
  position:relative;
  border-radius:8px;
}
details summary::marker{display:none}
details summary::after{
  content:"â–¸";
  position:absolute;
  right:10px;
  transition:.2s;
}
details[open]>summary::after{transform:rotate(90deg)}
details[open]>summary{background:#e6f4e9}

/* SUBJECT */
.subject summary{
  padding-left:20px;
  font-weight:600;
  color:var(--accent);
}

/* YEAR */
.year summary{
  padding-left:34px;
  font-size:14px;
  font-weight:500;
  color:#4b5563;
}

/* PAPER */
.paper-item{
  padding:6px 0 6px 52px;
  font-size:13px;
  cursor:pointer;
  color:var(--muted);
}
.paper-item:hover{color:var(--accent)}
.paper-item.active{
  color:var(--accent);
  font-weight:600;
}

/* CONTENT */
.content{
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:10px;
  min-height:0;
}

.breadcrumb{
  font-size:14px;
  color:var(--muted);
}

/* TABS */
.tabs{
  display:flex;
  gap:10px;
  border-bottom:2px solid var(--border);
}
.tab{
  padding:6px 12px;
  font-size:14px;
  cursor:pointer;
  color:var(--muted);
}
.tab.active{
  color:var(--accent);
  font-weight:600;
  border-bottom:3px solid var(--accent);
}
.tab.not-found{
  color:#ef4444;
  cursor:default;
}
.tab.disabled{
  color:#9ca3af;
  cursor:default;
}

/* VIEWER */
iframe{
  flex:1;
  width:100%;
  border:none;
  border-radius:12px;
  background:#fff;
}

/* EMPTY STATE */
.empty-state{
  flex:1;
  display:flex;
  align-items:center;
  justify-content:center;
  background:#ffffff;
  border:1px dashed var(--border);
  border-radius:12px;
  font-size:20px;
  font-weight:600;
  color:var(--muted);
  text-align:center;
  padding:30px;
}

/* FOOTER */
footer{
  position:sticky;
  bottom:0;
  background:var(--panel);
  border-top:1px solid var(--border);
  text-align:center;
  font-size:13px;
  padding:10px;
}

/* MOBILE */
@media (max-width: 768px){
  .container{grid-template-columns:1fr}
  .sidebar{
    max-height:220px;
    border-right:none;
    border-bottom:1px solid var(--border);
  }
  iframe{min-height:60vh}
}
</style>
</head>

<body>

<header>
  <div class="logo"><img src="mem1.png"></div>
  <div class="site-title">My Exam Mentor</div>

  <div class="menu" id="menu">
    <button class="menu-btn" id="menuBtn" onclick="toggleMenu()">Home â–¾</button>
    <div class="menu-content" id="menuItems"></div>
  </div>
</header>

<div class="container">
  <aside class="sidebar" id="sidebar"></aside>

  <main class="content">
    <div class="breadcrumb" id="breadcrumb">Home</div>
    <div class="tabs" id="tabs"></div>
    <iframe id="viewer" src="pages/home.html"></iframe>
  </main>
</div>

<footer>
  Â© 2026 My Exam Mentor Â· Built with Passion by Dheeraj Gurrapu
</footer>

<script>
/* EMPTY STATE HELPERS */
function showEmptyState(msg){
  tabs.innerHTML='';
  viewer.src='about:blank';
  viewer.style.display='none';

  let e=document.getElementById('emptyState');
  if(!e){
    e=document.createElement('div');
    e.id='emptyState';
    e.className='empty-state';
    viewer.parentNode.appendChild(e);
  }
  e.innerHTML=msg;
}
function clearEmptyState(){
  const e=document.getElementById('emptyState');
  if(e) e.remove();
  viewer.style.display='block';
}

/* TOP MENU */
const pages={Home:'home.html',About:'about.html'};
let activePage='Home';

function toggleMenu(){menu.classList.toggle('open')}
function renderMenu(){
  menuBtn.textContent=activePage+' â–¾';
  menuItems.innerHTML='';
  Object.keys(pages).forEach(p=>{
    if(p!==activePage){
      const d=document.createElement('div');
      d.textContent=p;
      d.onclick=()=>loadPage(p);
      menuItems.appendChild(d);
    }
  });
}
function loadPage(p){
  activePage=p;
  viewer.src='pages/'+pages[p];
  breadcrumb.textContent=p;
  tabs.innerHTML='';
  clearEmptyState();
  renderMenu();
  menu.classList.remove('open');
}
renderMenu();

/* SIDEBAR */
fetch('pdf-index.json').then(r=>r.json()).then(buildSidebar);

function buildSidebar(data){
  sidebar.innerHTML='';

  for(const board in data){
    const bd=document.createElement('details');
    bd.appendChild(Object.assign(document.createElement('summary'),{textContent:board.toUpperCase()}));

    for(const subject in data[board]){
      const sd=document.createElement('details');
      sd.className='subject';
      sd.appendChild(Object.assign(document.createElement('summary'),{textContent:subject}));

      const years=Object.keys(data[board][subject]);

      if(years.length===0){
        const i=document.createElement('div');
        i.className='paper-item';
        i.textContent='No papers available';
        i.onclick=()=>showEmptyState("This page is doing push-ups ðŸ’ª<br>Back soon!");
        sd.appendChild(i);
      }

      years.sort((a,b)=>b.localeCompare(a)).forEach(year=>{
        const yd=document.createElement('details');
        yd.className='year';
        yd.appendChild(Object.assign(document.createElement('summary'),{textContent:year}));

        const files=data[board][subject][year].filter(f => f.toLowerCase().endsWith('.pdf'));
        if(files.length===0){
          const i=document.createElement('div');
          i.className='paper-item';
          i.textContent='No papers yet';
          i.onclick=()=>showEmptyState("This page is doing push-ups ðŸ’ª<br>Back soon!");
          yd.appendChild(i);
          sd.appendChild(yd);
          return;
        }

        const grouped={};
        files.forEach(f=>{
          const b=f.replace(/_[QA]\.pdf$/,'').replace('.pdf','');
          grouped[b]=grouped[b]||{};
          if(f.includes('_A')) grouped[b].A=f;
          else grouped[b].Q=f;
        });

        Object.keys(grouped).forEach(base=>{
          const item=document.createElement('div');
          item.className='paper-item';
          item.textContent=base;

          item.onclick=()=>{
            clearEmptyState();
            document.querySelectorAll('.paper-item').forEach(x=>x.classList.remove('active'));
            item.classList.add('active');

            breadcrumb.textContent=`${board.toUpperCase()} â†’ ${subject} â†’ ${year} â†’ ${base}`;

            tabs.innerHTML=`
              <div class="tab active" data-type="Q">Question Paper</div>
              ${
                grouped[base].A
                ? `<div class="tab" data-type="A">Answer Sheet</div>`
                : `<div class="tab not-found">Answer Sheet Not Found</div>`
              }
              <div class="tab disabled">Analysis (Coming Soon)</div>
            `;

            document.querySelectorAll('.tab[data-type]').forEach(tab=>{
              tab.onclick=()=>{
                document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
                tab.classList.add('active');
                viewer.src=`pdfs/${board}/${subject}/${year}/${grouped[base][tab.dataset.type]}#view=FitH`;
              };
            });

            viewer.src=`pdfs/${board}/${subject}/${year}/${grouped[base].Q}#view=FitH`;
          };

          yd.appendChild(item);
        });

        sd.appendChild(yd);
      });

      bd.appendChild(sd);
    }
    sidebar.appendChild(bd);
  }
}
</script>

</body>
</html>
